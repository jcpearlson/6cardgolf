<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>6 Card Golf - P2P Card Game</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="container">
      <h1>6 Card Golf</h1>

      <div id="connectionSetup" class="connection-setup">
        <div id="initialView">
          <div class="connection-instructions">
            <h2>🎮 How to Play Online</h2>
            <ol>
              <li><b>Player 1 (Host):</b> Click "Create Game".</li>
              <li><b>Player 2 (Client):</b> Click "Join Game".</li>
            </ol>
            <p>Follow the on-screen instructions to connect!</p>
          </div>
          <div class="connection-controls">
            <button id="showHostViewBtn" class="button-success">
              🎯 Create Game (Host)
            </button>
            <button id="showJoinViewBtn" class="button-success">
              🚀 Join Game (Client)
            </button>
          </div>
        </div>

        <div id="hostView" style="display: none">
          <div class="connection-instructions">
            <p>
              <b>Step 1:</b> Click the button below to generate an Offer Code.
            </p>
          </div>
          <button id="createGameBtn">Generate Offer Code</button>
          <div id="hostStep2" class="code-display" style="display: none">
            <hr style="width: 100%; margin: 20px 0" />
            <p>
              <b>Step 2:</b> Copy this Offer Code and send it to the other
              player.
            </p>
            <div class="code-container">
              <textarea id="offerCode" rows="4" readonly></textarea>
              <button id="copyOfferBtn">Copy</button>
            </div>
            <p>
              <b>Step 3:</b> Paste their Answer Code below and click Confirm.
            </p>
            <div class="code-container">
              <textarea
                id="answerCode"
                placeholder="Paste Answer Code here..."
                rows="4"
              ></textarea>
            </div>
            <button id="confirmConnectionBtn" class="button-success">
              🤝 Confirm Connection
            </button>
          </div>
        </div>

        <div id="joinView" style="display: none">
          <div class="connection-instructions">
            <p>
              <b>Step 1:</b> Paste the Offer Code from the host below and click
              "Create Answer".
            </p>
          </div>
          <div class="code-container">
            <textarea
              id="pastedOfferCode"
              placeholder="Paste Offer Code here..."
              rows="4"
            ></textarea>
          </div>
          <button id="joinGameBtn">Create Answer Code</button>
          <div id="joinStep2" class="code-display" style="display: none">
            <hr style="width: 100%; margin: 20px 0" />
            <p>
              <b>Step 2:</b> Almost there! Copy this Answer Code and send it
              back to the host.
            </p>
            <div class="code-container">
              <textarea id="generatedAnswerCode" rows="4" readonly></textarea>
              <button id="copyAnswerBtn">Copy</button>
            </div>
            <p>The game will start once the host confirms.</p>
          </div>
        </div>
      </div>

      <div id="gameContainer" class="game-container">
        <div class="game-header">
          <h2>6 Card Golf</h2>
          <div id="connectionStatus" class="connection-status disconnected">
            Connecting...
          </div>
          <button id="disconnectBtn" class="button-danger">Disconnect</button>
        </div>

        <div class="game-content">
          <div class="game-area">
            <div class="opponent-area player-area">
              <div class="hand-label">🎯 Opponent's Hand</div>
              <div id="opponentHand" class="hand"></div>
              <div id="opponentScore" class="score">Score: ?</div>
            </div>

            <div class="piles">
              <div id="drawnCardDisplay" class="pile drawn-card-display">
                <div>✨<br />Drawn</div>
              </div>
              <div id="drawPile" class="pile">
                <div>📚<br />Draw</div>
              </div>
              <div id="discardPile" class="pile">
                <div>🗑️<br />Discard</div>
              </div>
            </div>

            <div class="status-area">
              <div id="turnIndicator" class="turn-indicator">
                Waiting for connection...
              </div>
              <div id="gameStatus" class="game-status">
                Connect with a friend to start playing!
              </div>
            </div>

            <div class="player-area">
              <div class="hand-label">🎮 Your Hand</div>
              <div id="playerHand" class="hand"></div>
              <div id="playerScore" class="score">Score: 0</div>
            </div>

            <div class="controls">
              <button id="takeDiscardBtn" style="display: none">
                Take from Discard
              </button>
              <button id="takeDrawBtn" style="display: none">
                Take from Draw Pile
              </button>
              <button id="endTurnBtn" style="display: none">End Turn</button>
              <button id="flipCardsBtn" style="display: none">
                Flip All Cards
              </button>
              <button
                id="newGameBtn"
                style="display: none"
                class="button-success"
              >
                New Game
              </button>
            </div>
          </div>

          <div class="chat-area">
            <div class="chat-header">💬 Chat</div>
            <div id="chatMessages" class="chat-messages"></div>
            <div class="chat-input-area">
              <input
                type="text"
                id="chatInput"
                class="chat-input"
                placeholder="Type a message..."
                maxlength="200"
              />
              <button id="chatSendBtn" class="chat-send">Send</button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="webrtc.js"></script>
    <script src="6cardgolf.js"></script>
    <script src="6cardgolfUI.js"></script>
  </body>
</html>
